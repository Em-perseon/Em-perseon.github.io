
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>XuSibo&#39;s Blog</title>
    <meta name="author" content="Rick" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <link rel="icon" href="/images/avatar.jpg" />
    <link rel="preconnect" href="https://s4.zstatic.net" />
<script src="https://s4.zstatic.net/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<link rel="preconnect" href="https://fonts.googleapis.cn" />
<link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin />
<link
    rel="stylesheet"
    href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap"
/>
<script> const mixins = {}; </script>

<script src="https://polyfill.alicdn.com/v3/polyfill.min.js?features=default"></script>


<script src="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>


<script src="https://s4.zstatic.net/ajax/libs/KaTeX/0.16.9/katex.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/KaTeX/0.16.9/katex.min.css" />
<script src="/js/lib/math.js"></script>


<script src="/js/lib/preview.js"></script>





<script src="/js/lib/home.js"></script>

<link rel="stylesheet" href="/css/main.css" />

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>XUSIBO&#39;S BLOG</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;XUSIBO&#39;S BLOG</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div id="home-head">
    <div
        id="home-background"
        ref="homeBackground"
        data-images="/images/background.jpg"
    ></div>
    <div id="home-info" @click="homeClick">
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="info">
            <div class="wrap">
                <h1>XuSibo&#39;s Blog</h1>
                <h3></h3>
                <h5></h5>
            </div>
        </span>
    </div>
</div>
<div
    id="home-posts-wrap"
    ref="homePostsWrap"
    true
>
    <div id="home-posts">
        

<div class="post">
    <a href="/2024/07/14/CHATDB-AUGMENTING-LLMS-WITH-DATABASES-AS-THEIR-SYMBOLIC-MEMORY/">
        <h2 class="post-title">CHATDB-AUGMENTING-LLMsS-WITH-DATABASES-AS-THEIR-SYMBOLIC-MEMORY</h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/7/14
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><p>具有内存的大型语言模型(LLMs)在计算上是通用的，然而，主流LLMs并没有<strong>充分利用内存</strong>，而且设计受到生物大脑的严重影响。传统的神经记忆机制由于其<strong>近似性质</strong>和<strong>容易累积错误</strong>，无法支持LLMs<strong>模拟复杂推理</strong>。在本文中，我们从现代计算机体系结构中寻求灵感，以<strong>增强具有符号记忆的LLMs</strong>，用于复杂的<strong>多跳推理</strong>。这样一个符号内存框架被实例化为一个LLMs和一组SQL数据库，其中LLMs生成SQL指令来操作SQL数据库。</p>
<ul>
<li>论文链接：<a target="_blank" rel="noopener" href="https://arxiv.org/abs/2306.03901">https://arxiv.org/abs/2306.03901</a></li>
<li>代码链接：<a target="_blank" rel="noopener" href="https://github.com/huchenxucs/C">https://github.com/huchenxucs/C</a></li>
</ul>
<h1 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1.Introduction"></a>1.Introduction</h1><p>LLMs存在以下局限性：</p>
<ul>
<li><p>与语言模型的多回合交互会产生大量的令牌，这很容易<strong>超过llm的输入令牌限制</strong>。</p>
<ul>
<li>令牌：代表模型可以理解和生成的最小意义单位，是LLM 进行处理的最小单元。在文本的背景下，一个Token可以是一个单词、单词的一部分（子词）或甚至是一个字符，这取决于Token化过程。</li>
<li>随着交互的进行，llm必须维护上下文信息(例如，用户输入和先前的响应)，并根据累积的数据生成响应。然而，简单地将所有上下文信息连接起来并将其塞进llm很容易超出llm的处理能力并积累错误，从而导致模型失去对对话的跟踪并产生不太准确的响应。</li>
</ul>
</li>
<li><p>一些神经记忆机制已被探索已克服llm的token输入有限问题。<strong>记忆组件</strong>作为存储和检索系统，从以前的交互中获取相关信息。然而，用传统的神经记忆增强llm通常会导致<strong>存储、检索和操作内存中的历史信息的困难</strong>，特别是对于需要复杂的多跳推理的任务。两个主要原因是:</p>
<ul>
<li>它们<strong>没有以结构化的形式存储历史信息</strong>;</li>
<li>它们对存储在存储器中的信息的操作<strong>不是象征性的</strong>，因为它们都依赖于一些向量相似性计算，这些计算可能是不准确的，从而导致错误的积累。</li>
</ul>
</li>
<li><p>解决方法：</p>
<ul>
<li>使用数据库作为llm的新型符号内存。整个框架命名为ChatDB。结构如下图所示：</li>
</ul>
<img src="/2024/07/14/CHATDB-AUGMENTING-LLMS-WITH-DATABASES-AS-THEIR-SYMBOLIC-MEMORY/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-07-14%20102945.jpg" class="" title="屏幕截图 2024-07-14 102945">

<p>图1:ChatDB的总体工作流程。LLM控制器控制对存储器的读写操作。存储器存储历史信息并提供相关的历史信息，以帮助响应用户输入。在ChatDB中，我们专注于用数据库作为符号内存来增强llm</p>
<ul>
<li><p>具体组成</p>
<ul>
<li><p>LLM控制器：LLM控制器可以是任何常用的LLM </p>
</li>
<li><p>LLM的内存可以是符号或非符号，也可以是两者的组合，它负责存储历史信息，并在需要时提供信息，以帮助LLM响应用户输入</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>在ChatDB中，我们着重于使用数据库作为<strong>符号内存</strong>，它允许通过执行符号语言(即SQL语句)来结构化地存储历史信息。这些SQL语句是由LLM生成的。在需要精确记录、修改、查询、删除和分析历史数据的场景中，将数据库合并为符号内存特别有用。例如，商店经理需要维护日常销售记录，而使用纯文本或矩阵作为内存是不合适的</p>
</li>
<li><p>然而，使用数据库作为外部符号内存是非常合适的。数据库可以使用SQL语句进行精确的操作，包括数据的插入、删除、更新和选择。因此，使用数据库作为外部符号存储器确保了管理和操作历史数据的准确性和效率，显著提高了llm在需要高精度和长期数据记录和处理的场景中的性能。</p>
<ul>
<li><strong>符号内存</strong>是指大脑或人工智能系统中存储和处理符号信息的能力。这些符号可以是文字、数字、图像或其他代表信息的标记。</li>
<li><strong>外部符号内存</strong>是指将符号信息存储在外部设备或介质上，而不是仅限于系统内部存储。这种记忆系统利用外部工具来增强和扩展内部记忆能力。</li>
</ul>
</li>
<li><p>在ChatDB框架中，我们提出了<strong>内存链(CoM)<strong>方法来更有效地操作外部符号内存，从而进一步增强llm的推理能力。</strong>内存链方法</strong>将<strong>用户输入转换为一系列导致最终结果的中间内存操作步骤</strong>。通过内存链方法，<strong>将一个复杂的问题分解为多个记忆操作步骤</strong>，大大降低了问题解决的复杂性。在ChatDB中，每个中间步骤都涉及一个或多个SQL语句。</p>
</li>
<li><p><strong>总结</strong>：首先，建议<strong>用数据库作为llm的外部符号内存</strong>，允许历史数据的结构化存储，并允许使用SQL语句进行符号和复杂的数据操作。其次，我们的<strong>内存链方法</strong>通过将用户输入转换为多步中间内存操作来实现有效的内存操作，这增强了ChatDB的性能，使其能够以更高的准确性和稳定性处理复杂的多表数据库交互。</p>
</li>
</ul>
<h1 id="3-ChatDB"><a href="#3-ChatDB" class="headerlink" title="3. ChatDB"></a>3. ChatDB</h1><h2 id="3-1-任务定义"><a href="#3-1-任务定义" class="headerlink" title="3.1 任务定义"></a>3.1 任务定义</h2><ul>
<li>给定用户以自然语言输入和数据库中现有表的详细信息(如果没有现有表，则不需要)，目标是操作符号内存，即外部数据库，以满足用户的请求。<ul>
<li>例如，如果用户(例如，商店经理)命令是记录、修改、查询和删除特定的数据，那么相应的SQL操作应该是分别在适当的表中插入、更新、选择和删除相关数据。这些操作通常涉及数据库中的多个表</li>
</ul>
</li>
</ul>
<h2 id="3-2框架概述"><a href="#3-2框架概述" class="headerlink" title="3.2框架概述"></a>3.2框架概述</h2><p>ChatDB框架由三个主要阶段组成：<strong>输入处理</strong>、<strong>记忆链</strong>和<strong>响应总结</strong></p>
<img src="/2024/07/14/CHATDB-AUGMENTING-LLMS-WITH-DATABASES-AS-THEIR-SYMBOLIC-MEMORY/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-07-14%20112221.jpg" class="" title="屏幕截图 2024-07-14 112221">

<ul>
<li><strong>输入处理：</strong>如果响应用户输入需要使用内存，ChatDB通过llm生成一系列中间步骤来操作符号内存。否则，我们直接使用llm来生成回复。</li>
<li><strong>Chain-of-Memory：</strong>ChatDB执行一系列中间内存操作步骤来与符号内存交互。ChatDB根据先前生成的一系列SQL语句依次操作符号内存，包括插入、更新、选择、删除等操作。外部数据库执行相应的SQL语句，更新数据库，并返回结果。值得注意的是，ChatDB在执行内存操作步骤之前，会根据前面SQL语句的结果来决定是否更新内存操作步骤。ChatDB按照相同的过程执行下一步，直到完成对内存的所有操作。</li>
<li><strong>响应总结：</strong>ChatDB根据一系列内存链步骤的结果总结对用户的最终响应</li>
</ul>
<h2 id="3-3内存链"><a href="#3-3内存链" class="headerlink" title="3.3内存链"></a>3.3内存链</h2><p>思维链强调将复杂推理分解为一系列中间步骤。</p>
<p>通过提供符号内存机制来支持与这些中间步骤相关联的存储，可以将内存链(CoM)视为一种增强思维链的方法。</p>
<p>内存链的目的是提高llm在操作符号内存时的推理能力和鲁棒性。该方法包括<strong>将用户输入转换为中间内存操作序列</strong>，使llm能够<strong>以符号方式更准确有效地操作内存</strong>。对于涉及与历史数据进行复杂而准确交互的实际应用程序(例如管理设置中的记录保存和数据分析)，操作符号内存的能力特别有价值。</p>
<p>为了提高我们方法的性能和稳定性，我们采用了上下文学习，提供了几个<strong>内存链步骤序列</strong>和<strong>思维链提示</strong>的提示示例。一个强大而准确的<strong>内存链</strong>过程使llm能够更好地对符号记忆进行推理，并处理更复杂的场景。</p>
<ul>
<li>内存链的优点是双重的。<ul>
<li>首先，它使llm能够以更高的精度执行复杂的数据库操作，增强了它们在符号内存上的多跳推理能力。</li>
<li>其次，通过将复杂操作分解为一系列中间内存操作，内存链方法增强了llm处理复杂多表交互的能力。</li>
</ul>
</li>
</ul>
<p>这种方法使LLMs能够更好地处理边缘情况和意外情况，使其成为现实应用程序中很有前途的方法。</p>
<img src="/2024/07/14/CHATDB-AUGMENTING-LLMS-WITH-DATABASES-AS-THEIR-SYMBOLIC-MEMORY/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-07-14%20115317.jpg" class="" title="屏幕截图 2024-07-14 115317">

<h2 id="3-4与以往记忆增强llm的比较"><a href="#3-4与以往记忆增强llm的比较" class="headerlink" title="3.4与以往记忆增强llm的比较"></a>3.4与以往记忆增强llm的比较</h2><img src="/2024/07/14/CHATDB-AUGMENTING-LLMS-WITH-DATABASES-AS-THEIR-SYMBOLIC-MEMORY/image-20240714120401054.png" class="" title="image-20240714120401054">


            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/CoM-LLMs-SQL/" style="color: #ffa2c4">CoM LLMs SQL</a>
        </span>
        
    </div>
    <a href="/2024/07/14/CHATDB-AUGMENTING-LLMS-WITH-DATABASES-AS-THEIR-SYMBOLIC-MEMORY/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2024/07/14/Self-Attentive-Sequential-Recommendation/">
        <h2 class="post-title">Self-Attentive-Sequential-Recommendation</h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/7/14
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            
            
        </div>
    </div>
    <div class="post-tags">
        
        
        
    </div>
    <a href="/2024/07/14/Self-Attentive-Sequential-Recommendation/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2024/07/13/Improving-Demonstration-Diversity-by-Human-Free-Fusing-for-Text-to-SQL/">
        <h2 class="post-title">Improving Demonstration Diversity by Human-Free Fusing for Text-to-SQL</h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/7/13
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h1 id="1-Abstract"><a href="#1-Abstract" class="headerlink" title="1.Abstract"></a>1.Abstract</h1><ul>
<li><p>使用<strong>大型语言模型(llm)的上下文学习</strong>是当前<strong>Text-to-SQL​</strong>的主流方法。先前的研究已经探索了从人工标记的示范池中选择相关的示范，但这些方法缺乏<strong>多样性</strong>，并且需要高昂的标记成本。</p>
</li>
<li><p>在这项工作中，我们将讨论度量和增强文本到sql演示池的多样性。首先，我们引入了一个<strong>多样性度量</strong>，并提出了现有标签数据的多样性可以进一步增强。受这些发现的启发，提出了<strong>fuse</strong>，迭代地融合演示，以创建基于人类标记的多样化演示池，甚至从头开始使用llm，从而降低标记成本。FUSED在现有标记的基础上实现了3.2%的平均改进，在几个主流数据集上实现了5.0%的从头开始改进，证明了它的有效性</p>
<ul>
<li>多样性指的是在文本到SQL（Text-to-SQL）任务中，用于指导语言模型生成SQL查询的示例集合在内容、结构和语义上的差异性和丰富性。<ol>
<li><strong>内容多样性</strong>：示例应涵盖不同的主题和信息点，确保模型能够处理各种类型的用户查询。</li>
<li><strong>结构多样性</strong>：示例应包括不同的SQL语句结构，如不同的查询子句（SELECT、WHERE、GROUP BY等）和操作符，以帮助模型理解并生成各种结构的SQL查询。</li>
<li><strong>语义多样性</strong>：示例应表达不同的语义意图和逻辑，反映用户查询的不同需求和目标。</li>
<li><strong>数据库多样性</strong>：示例应来源于不同的数据库和表结构，以增强模型对不同数据库环境的适应性。</li>
<li><strong>查询复杂性</strong>：示例应包括从简单到复杂的查询，使模型能够处理不同难度级别的SQL生成任务。</li>
</ol>
</li>
</ul>
<p>文章链接：<a target="_blank" rel="noopener" href="https://arxiv.org/pdf/2402.10663">https://arxiv.org/pdf/2402.10663</a><br></p>
<p>代码链接：<a target="_blank" rel="noopener" href="https://github.com/zirui-HIT/Fused">https://github.com/zirui-HIT/Fused</a></p>
</li>
</ul>
<h1 id="2-Analysis"><a href="#2-Analysis" class="headerlink" title="2.Analysis"></a>2.Analysis</h1><p>提出可以进一步增强现有标记演示池的多样性。首先，我们讨论了示范池的高度多样性的必要性。然后，我们引入了一个度量来量化演示池的多样性。基于这一度量，我们讨论了现有标签数据的多样性可以进一步增强。我们将目前的度量标准与附录A中其他现有度量标准进行比较。</p>
<h2 id="Necessity-of-the-Diversity"><a href="#Necessity-of-the-Diversity" class="headerlink" title="Necessity of the Diversity"></a>Necessity of the Diversity</h2><ul>
<li>LLms通过模仿提供的示范来生成答案，也就是，给定一个用户问题，以前的工作从演示池中选择最相似的演示来指导LLMs生成答案，但是，由于用户问题是<strong>不可预测的</strong>，因此演示池应该尽可能多样化，以涵盖各种用户问题。多样性越高，任何用户问题与演示之间的相似性越高，从而更好地指导答案生成;多样性越低，越来越多的用户问题与演示不太相似，从而降低了模型的性能。</li>
</ul>
<h2 id="Diversity-Measurement"><a href="#Diversity-Measurement" class="headerlink" title="Diversity Measurement"></a>Diversity Measurement</h2><ul>
<li>基于前面的讨论，我们使用<strong>与演示池相似度最低</strong>的用户问题来度量演示池的多样性。</li>
<li>形式上$D&#x3D;{d_i}$表示演示池，$U&#x3D;{u}$表示用户问题，$sim(U,D)$表示U和D之间的相似度，以本文中它们编码向量之间的欧氏距离的倒数计算，利用下面公式来衡量示范池$D$​的多样性，称为多样性度量，该指标对应于与演示池中最相似的演示相似度最小的用户问题与任何其他用户问题的相似度。</li>
</ul>
<p>$$\mathrm{DM}&#x3D;\min_{u\in U}\max_{d_i\in D}\mathrm{sim}(u,d_i)$$​</p>
<h2 id="Diversity-of-the-Existing-Labeling-Can-be-Further-Enhanced"><a href="#Diversity-of-the-Existing-Labeling-Can-be-Further-Enhanced" class="headerlink" title="Diversity of the Existing Labeling Can be Further Enhanced"></a>Diversity of the Existing Labeling Can be Further Enhanced</h2><ul>
<li>使用上面的度量，我们然后度量现有文本到sql标记演示池的多样性。现有标注演示池的DM和性能如图4和图5所示。这些数字显示了DM和性能明显高于现有标记数据的其他演示池。因此，虽然现有的标签表现出较高的多样性，但可以进一步改进，从而提高性能。因此，我们接下来将讨论综合演示的方法，以增强演示池的多样性。</li>
</ul>
<div style="display: flex; justify-content: space-around;">
  <img src="/2024/07/13/Improving-Demonstration-Diversity-by-Human-Free-Fusing-for-Text-to-SQL/0_0.jpg"  style="width: 200px; height: auto; margin: 10px;">
  <img src="/2024/07/13/Improving-Demonstration-Diversity-by-Human-Free-Fusing-for-Text-to-SQL/undefined"  style="width: 200px; height: auto; margin: 10px;">
</div>

<h1 id="3-Method"><a href="#3-Method" class="headerlink" title="3.Method"></a>3.Method</h1><p>方法侧重于如何用llm合成给定数据库的新演示。考虑到仅依靠采样生成直接生成演示的多样性较差提出了通过迭代融合不同演示的方法进行合成，如图3所示。在每次迭代中，我们指导模型生成与之前迭代不相似的演示，从而增强多样性。我们从理论上证明了我们的方法可以增强附录D中的DM。</p>
<p><img src="C:\Users\s\AppData\Roaming\Typora\typora-user-images\image-20240713165722636.png" alt="label"></p>
<p>方法简单解释：首先基于SQL关键字(例如，WHERE, ORDER BY)对演示进行聚类。然后，我们对每个集群的演示进行采样和融合。融合的演示包含了不同于采样演示的WHERE和ORDER BY，从而增强了演示的多样性。在实践中，我们使用编码的用户问题而不是SQL关键字进行合成，因为用户问题比SQL具有更多的语义信息</p>
<h2 id="3-1整体预览"><a href="#3-1整体预览" class="headerlink" title="3.1整体预览"></a>3.1整体预览</h2>
            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/sql/" style="color: #03a9f4">sql</a>
        </span>
        
    </div>
    <a href="/2024/07/13/Improving-Demonstration-Diversity-by-Human-Free-Fusing-for-Text-to-SQL/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2024/07/12/DTS-SQL-Decomposed-Text-to-SQL-with-Small-Large-Language-Models/">
        <h2 class="post-title">DTS-SQL: Decomposed Text-to-SQL with Small Large Language Models</h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/7/12
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h1 id="1-Abstract"><a href="#1-Abstract" class="headerlink" title="1. Abstract"></a>1. Abstract</h1><p>文章介绍了一种名为DTS-SQL的新技术，它是一种分解式文本到SQL（Text-to-SQL）的方法，旨在减小开源小型语言模型（LLMs）与专有大型语言模型之间的性能差距。<br></p>
<p>文章链接：<a target="_blank" rel="noopener" href="https://arxiv.org/pdf/2402.01117">https://arxiv.org/pdf/2402.01117</a><br>代码链接：<a target="_blank" rel="noopener" href="https://anonymous.4open.science/r/DTS-SQL-2A42/README.md">https://anonymous.4open.science/r/DTS-SQL-2A42/README.md</a></p>
<h1 id="2-Methodology"><a href="#2-Methodology" class="headerlink" title="2. Methodology"></a>2. Methodology</h1><ul>
<li><p>LLMs的一个显著发展是，其会进行训练后细化，增强了它们与首选行为的一致性。<br></p>
<ul>
<li>训练后细化指的是大型语言模型（LLMs）完成初步的<strong>预训练阶段</strong>之后，进行的进一步训练或调整过程。这个阶段的目的是使模型更好地适应特定的应用场景或任务，提高其性能和输出结果的准确性。</li>
</ul>
</li>
<li><p>目前由于缺乏包含人类或者人工智能反馈的广泛数据集，导致人们导致人们主要关注<strong>Text-to-SQL</strong>的监督微调。这种方法需要一组特定的指令或提示及其相应的输出或响应。<br></p>
<ul>
<li>关于为什么要关注<strong>Text-to-SQL</strong>：Text-to-SQL系统能够将自然语言描述转化成对应的SQL查询语句，这项技术能够有效地辅助人们对海量的数据库进行查询。<ul>
<li>Text-to-SQL就是这样一项转化自然语言描述为SQL查询语句的技术。举个例子：当我们询问智能助手 “贾樟柯导演是在哪出生的啊？”，Text-to-SQL模型就会先根据问句解析出SQL语句“SELECT birth_city FROM director WHERE name &#x3D;”贾樟柯””，再对数据库执行该命令，最后向用户返回查询结果“山西省汾阳市”。<br></li>
<li>《一文了解Text-to-SQL》文章链接：<a target="_blank" rel="noopener" href="https://www.jiqizhixin.com/articles/2019-12-27-11">https://www.jiqizhixin.com/articles/2019-12-27-11</a></li>
</ul>
</li>
</ul>
</li>
<li><p>文章研究在Text-to-SQL上下文中对llm进行监督微调的既定方法。介绍了新的两步微调方法，旨在增强文本到sql领域中模型的性能</p>
</li>
</ul>
<h2 id="2-1有监督问题到SQL的微调（Supervised-fine-tunning-for-Text-to-SQL）"><a href="#2-1有监督问题到SQL的微调（Supervised-fine-tunning-for-Text-to-SQL）" class="headerlink" title="2.1有监督问题到SQL的微调（Supervised fine-tunning for Text-to-SQL）"></a>2.1有监督问题到SQL的微调（Supervised fine-tunning for Text-to-SQL）</h2><ul>
<li><p>在这个小节中，将探索在开源社区实践的Text-to-SQL任务的监督调优过程</p>
</li>
<li><p>给定一组数据库$D_i$ 其中包含对问题$q_i$和相应的SQL查询$s_i$，目标是使用一组训练数据$T&#x3D;$对大预言模型M进行微调，其中$q_i$和$s_i$表示自然语言问题和及其在数据库$D_i$上关联的SQL查询。监督微调的目标是为了<strong>最小化经验损失</strong>：$$\min_{\sigma,M^*}\frac{1}{|T|}\sum_{i&#x3D;1}^{|T|}\mathcal{L}(M^*(\sigma_f(q_i,D_i,s_i))$$</p>
<ul>
<li>其中，$\mathcal{L}$是测量实际SQL查询和模型生成的SQL查询之间的差异。</li>
<li>$\sigma_f$​​决定了问题、数据库模式和SQL查询的格式</li>
<li>$M^*$表示经过微调（fine-tuning）后的模型参数，M表示model，然后*表示经过微调</li>
</ul>
</li>
<li><p>主要的问题就是，我们事先不知道数据库中的表和哪些表是和要生成的SQL相关</p>
</li>
<li><p>因此一种常用的调优方法包括在提示中包括<strong>所有表的模式</strong>以及<strong>问题</strong>和<strong>SQL对</strong>。</p>
<ul>
<li>这种方法有两个目的:<ul>
<li>教模型生成正确的SQL查询</li>
<li>并从所有提供的表中识别相关的表。</li>
</ul>
</li>
<li>这种同时针对两个目标进行训练的方法使llm的SQL生成任务变得复杂，特别是对于只有几十亿个参数的较小模型。每个任务——生成SQL查询并正确链接到相关模式——都需要自己的推理过程。在大型语言模型中，很大一部分错误可归因于不正确的模式链接，这是该领域的一个主要挑战</li>
</ul>
</li>
</ul>
<h2 id="2-2分解监督微调（Decomposed-Supervised-Fine-tuning）"><a href="#2-2分解监督微调（Decomposed-Supervised-Fine-tuning）" class="headerlink" title="2.2分解监督微调（Decomposed Supervised Fine-tuning）"></a>2.2分解监督微调（Decomposed Supervised Fine-tuning）</h2><p>提出了一个两阶段的微调过程，将模式链接和SQL生成分开，旨在提高NL-to-SQL系统的性能</p>
<h3 id="2-2-1模式链接微调-（-Schema-linking-Fine-tuning）"><a href="#2-2-1模式链接微调-（-Schema-linking-Fine-tuning）" class="headerlink" title="2.2.1模式链接微调 （ Schema-linking Fine-tuning）"></a>2.2.1模式链接微调 （ Schema-linking Fine-tuning）</h3><ul>
<li>模式链接涉及识别数据库中相关的列和表，以响应自然语言查询。<ul>
<li>它已被证明可以增强跨域泛化性并促进复杂查询的创建</li>
<li>在之前的研究中，模式链接主要是通过上下文学习方法或在SQL生成的微调过程中隐含地完成的</li>
</ul>
</li>
<li>在本文章当中，将模式链接视为一项独特的任务，并显式微调llm，以便在使用自然语言查询时识别相关的表和列。</li>
<li>给定训练数据集$T&#x3D;{(q_i,s_i,D_i)}$，提取 SQL查询中所使用的所有列和表，创建一个新的数据集$T&#x3D;{(q_i,T_i,C_i,D_i)}$，其中$T_i$和$C_i$表示SQL查询$s_i$中使用的表和列表。在模式链接的监督微调过程中，主要的目标也是最小化经验损失，由下式进行定义：$$\min_{\sigma,M^*}\frac{1}{|T|}\sum_{i&#x3D;1}^{|T|}\mathcal{L}(M^*(\sigma_s(q_i,T_i,C_i,D_i))$$<ul>
<li>其中，$\mathcal{L}$表示模型下一个token预测的损失，将预测的列表和表名词与实际的基础真值名称进行比较</li>
</ul>
</li>
</ul>
<h3 id="2-2-2-SQL生成微调（SQL-Generation-Fine-tuning）"><a href="#2-2-2-SQL生成微调（SQL-Generation-Fine-tuning）" class="headerlink" title="2.2.2 SQL生成微调（SQL Generation Fine-tuning）"></a>2.2.2 SQL生成微调（SQL Generation Fine-tuning）</h3><ul>
<li>当确定了用于生成SQL的适当表之后，下一步就是利用一个基于问题和正确表的模式构造SQL查询模型。由于我们已经使用模式链接模块确定了可能正确的表，因此不需要在SQL生成模型的输入中包含所有表。</li>
<li>与之前微调llm的方法相反，我们从训练数据集$T&#x3D;{(q_i.s_i,D_i)}$中提取与基本真实SQL查询对应的相关表。然后对LLM进行微调，同时最小化下面的损失函数：$$\min_{\sigma,M^*}\frac{1}{|T|}\sum_{i&#x3D;1}^{|T|}\mathcal{L}(M^*(\sigma_g(q_i,T_i,s_i)) $$<ul>
<li>其中损失函数和2.1定义的是一样的，文本到sql训练过程的这种分解允许llm以单一目标进行训练。通过分离模式链接和SQL查询生成任务，我们改进了训练过程，实现了更集中、更有效的微调。</li>
</ul>
</li>
</ul>
<h1 id="3-Limitations"><a href="#3-Limitations" class="headerlink" title="3. Limitations"></a>3. Limitations</h1><ul>
<li>本文主要侧重于增强文本到sql任务的小型和大型语言模型的性能。然而，各种模式链接技术仍有进一步研究和比较的余地。将检索方法或上下文学习等方法与更大的模型(如GPT-4)一起应用于模式链接任务时，可以对确定最有效的模式链接方法产生有价值的见解。</li>
</ul>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        
        <span class="tag">
            
            <a href="/tags/LLMs-sql/" style="color: #00bcd4">LLMs sql</a>
        </span>
        
    </div>
    <a href="/2024/07/12/DTS-SQL-Decomposed-Text-to-SQL-with-Small-Large-Language-Models/" class="go-post">阅读全文</a>
</div>


        <div class="page-current">
    
    <span class="current">1</span>
    
    
    
    
</div>

    </div>
    
    <div id="home-card">
        <div id="card-style">
    <div id="card-div">
        <div class="avatar">
            <img src="/images/avatar.jpg" alt="avatar" />
        </div>
        <div class="name">Rick</div>
        <div class="description">
            <p>Description<br>…</p>

        </div>
        
        
        <div class="friend-links">
            
            <div class="friend-link">
                <a target="_blank" rel="noopener" href="https://argvchs.github.io">Argvchs</a>
            </div>
            
        </div>
        
    </div>
</div>

    </div>
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2024 XuSibo&#39;s Blog
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;Rick
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    
</body>
</html>
